{% extends "main.html" %}
{% load static %}

{% block title %}{{ outfit.name }} Â· Best Dressed{% endblock %}

{% block content %}
<div class="container py-5">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="display-6 fw-bold">
        {{ outfit.name }}
        {% if outfit.is_favorite %}
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="gold" class="bi bi-star-fill" viewBox="0 0 16 16">
          <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
        </svg>
        {% endif %}
      </h1>
      
      <!-- Badges -->
      <div class="mb-2">
        {% if outfit.occasion %}
          <span class="badge bg-primary">{{ outfit.get_occasion_display }}</span>
        {% endif %}
        {% if outfit.season %}
          <span class="badge bg-info">{{ outfit.get_season_display }}</span>
        {% endif %}
      </div>
      
      {% if outfit.description %}
        <p class="text-muted">{{ outfit.description }}</p>
      {% endif %}
      
      <p class="text-muted small">Created {{ outfit.created_at|date:"F d, Y" }}</p>
    </div>
    
    <div class="d-flex gap-2 align-items-center">
      <a href="{% url 'edit_outfit' outfit_pk=outfit.pk %}" class="btn btn-outline-primary d-flex align-items-center justify-content-center" style="width: 170px; height: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil me-1" viewBox="0 0 16 16">
          <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325"/>
        </svg>
        Edit
      </a>
      
      <!-- Duplicate Button -->
      <form method="post" action="{% url 'duplicate_outfit' outfit_pk=outfit.pk %}" style="margin: 0;">
        {% csrf_token %}
        <button type="submit" class="btn btn-outline-secondary d-flex align-items-center justify-content-center" style="width: 170px; height: 38px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-files me-1" viewBox="0 0 16 16">
            <path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2m0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1M3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1z"/>
          </svg>
          Duplicate
        </button>
      </form>
      
      <a href="{% url 'my_outfits' %}" class="btn btn-outline-secondary d-flex align-items-center justify-content-center" style="width: 170px; height: 38px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left me-1" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
        </svg>
        Back to Outfits
      </a>
    </div>
  </div>

  <!-- Items Display -->
  <h3 class="mb-3">Items in This Outfit ({{ outfit.item_count }})</h3>
  
  {% if outfit.items.all %}
    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-4">
      {% for item in outfit.items.all %}
      <div class="col">
        <div class="card h-100 border-0 shadow-sm">
          <img src="{{ item.image_url }}" class="card-img-top" alt="{{ item.title }}" 
               style="height: 200px; object-fit: cover;">
          <div class="card-body">
            <span class="badge bg-secondary mb-2">{{ item.get_category_display }}</span>
            <h6 class="card-title">{{ item.title }}</h6>
            {% if item.brand %}
              <p class="small text-muted mb-0">{{ item.brand }}</p>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info">
      This outfit doesn't have any items yet. <a href="{% url 'edit_outfit' outfit_pk=outfit.pk %}">Add items</a> to complete it!
    </div>
  {% endif %}
</div>
{% endblock %}