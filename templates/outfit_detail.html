{% extends "main.html" %}
{% load static %}

{% block title %}{{ outfit.name }} Â· Best Dressed{% endblock %}

{% block content %}
<div class="container py-5">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="display-6 fw-bold">
        {{ outfit.name }}
        {% if outfit.is_favorite %}
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="gold" class="bi bi-star-fill" viewBox="0 0 16 16">
          <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
        </svg>
        {% endif %}
      </h1>
      
      <!-- Badges -->
      <div class="mb-2">
        {% if outfit.occasion %}
          <span class="badge bg-primary">{{ outfit.get_occasion_display }}</span>
        {% endif %}
        {% if outfit.season %}
          <span class="badge bg-info">{{ outfit.get_season_display }}</span>
        {% endif %}
      </div>
      
      {% if outfit.description %}
        <p class="text-muted">{{ outfit.description }}</p>
      {% endif %}
      
      <p class="text-muted small">Created {{ outfit.created_at|date:"F d, Y" }}</p>
    </div>
    
    <div class="d-flex gap-2">
      <a href="{% url 'edit_outfit' outfit_pk=outfit.pk %}" class="btn btn-outline-primary">Edit</a>
      <a href="{% url 'my_outfits' %}" class="btn btn-outline-secondary">Back to Outfits</a>
    </div>
  </div>

  <!-- Items Display -->
  <h3 class="mb-3">Items in This Outfit ({{ outfit.item_count }})</h3>
  
  {% if outfit.items.all %}
    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-4">
      {% for item in outfit.items.all %}
      <div class="col">
        <div class="card h-100 border-0 shadow-sm">
          <img src="{{ item.image_url }}" class="card-img-top" alt="{{ item.title }}" 
               style="height: 200px; object-fit: cover;">
          <div class="card-body">
            <span class="badge bg-secondary mb-2">{{ item.get_category_display }}</span>
            <h6 class="card-title">{{ item.title }}</h6>
            {% if item.brand %}
              <p class="small text-muted mb-0">{{ item.brand }}</p>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info">
      This outfit doesn't have any items yet. <a href="{% url 'edit_outfit' outfit_pk=outfit.pk %}">Add items</a> to complete it!
    </div>
  {% endif %}
</div>
{% endblock %}